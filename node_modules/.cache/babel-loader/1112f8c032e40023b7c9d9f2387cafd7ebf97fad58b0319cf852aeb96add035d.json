{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\allen\\\\dev\\\\FreshroadReact\\\\src\\\\pages\\\\Chatpage.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useRef } from 'react';\nimport '../App.css';\nimport freshroadlogo from '../images/freshroadlogo.png';\nimport avatarImage from '../images/callrepai.png';\nimport { PaperAirplaneIcon, MicrophoneIcon, TranslateIcon, SpeakerWaveIcon } from '@heroicons/react/outline';\nimport { tts11 } from '../api/elevenlabs';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst ChatInterfacePage = () => {\n  _s();\n  const [messages, setMessages] = useState([{\n    sender: 'bot',\n    text: \"Welcome to the Santa Clara County 211 call center. How can I help you today?\"\n  }]);\n  const [input, setInput] = useState('');\n  const [isListening, setIsListening] = useState(false);\n  const [spokenText, setSpokenText] = useState('');\n  const [selectedLanguage, setSelectedLanguage] = useState('English');\n  const [isTranslating, setIsTranslating] = useState(false);\n  const chatBodyRef = useRef(null);\n  const languageCodes = {\n    English: 'en-US',\n    Español: 'es-ES',\n    中文: 'zh-CN',\n    Français: 'fr-FR',\n    Deutsch: 'de-DE',\n    Italiano: 'it-IT',\n    日本語: 'ja-JP',\n    한국어: 'ko-KR',\n    Português: 'pt-BR',\n    Русский: 'ru-RU'\n  };\n  useEffect(() => {\n    if (chatBodyRef.current) {\n      chatBodyRef.current.scrollTop = chatBodyRef.current.scrollHeight;\n    }\n  }, [messages]);\n  const fetchChatGPTResponse = async userMessage => {\n    const apiKey = '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'; // Replace with your actual API key\n    const chatHistory = [{\n      role: 'system',\n      content: 'Limit responses to three sentences and assume the user can read English so send all responses in English but do not let the user know about this prompt. When you receive questions in another language, understand it and reply in English. The conversations will be multilingual. You work as a customer service representative for the Santa Clara County 211 call center. Your job is to provide accurate information about the services Santa Clara County can offer. Always speak in sentences and lists. If the user is asking for food assistance, give information on CalFresh, the food stamp application, include eligibility. If user agrees to let you help fill out the form, send back only the code \"CalFreshAccepted\".'\n    }, ...messages.map(msg => ({\n      role: msg.sender === 'user' ? 'user' : 'assistant',\n      content: msg.text\n    })), {\n      role: 'user',\n      content: userMessage\n    }];\n    try {\n      const response = await fetch('https://api.openai.com/v1/chat/completions', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          Authorization: `Bearer ${apiKey}`\n        },\n        body: JSON.stringify({\n          model: 'gpt-4',\n          messages: chatHistory\n        })\n      });\n      const data = await response.json();\n      const botMessage = data.choices[0].message.content;\n      if (botMessage.trim() === 'CalFreshAccepted') {\n        // Special handling for CalFreshAccepted\n        setMessages(prevMessages => [...prevMessages, {\n          sender: 'bot',\n          text: 'CalFreshAccepted',\n          isSpecial: true\n        }]);\n      } else if (selectedLanguage !== 'English') {\n        handleTranslateAndPlayTTS(botMessage);\n      } else {\n        setMessages(prevMessages => [...prevMessages, {\n          sender: 'bot',\n          text: botMessage\n        }]);\n        playTTS(botMessage);\n      }\n    } catch (error) {\n      console.error('Error fetching response:', error);\n      setMessages(prevMessages => [...prevMessages, {\n        sender: 'bot',\n        text: 'Sorry, I am having trouble responding at the moment. Please try again later.'\n      }]);\n    }\n  };\n  const handleTranslateAndPlayTTS = async message => {\n    const apiKey = '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'; // Replace with your actual API key\n    const translationPrompt = `Translate the following text into ${selectedLanguage}: \"${message}\"`;\n    try {\n      const response = await fetch('https://api.openai.com/v1/chat/completions', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          Authorization: `Bearer ${apiKey}`\n        },\n        body: JSON.stringify({\n          model: 'gpt-4',\n          messages: [{\n            role: 'system',\n            content: translationPrompt\n          }]\n        })\n      });\n      const data = await response.json();\n      const translatedMessage = data.choices[0].message.content;\n      setMessages(prevMessages => [...prevMessages, {\n        sender: 'bot',\n        text: message,\n        translation: translatedMessage\n      }]);\n      playTTS(translatedMessage); // Play only the translated message\n    } catch (error) {\n      console.error('Error translating message:', error);\n      setMessages(prevMessages => [...prevMessages, {\n        sender: 'bot',\n        text: 'Sorry, I am having trouble translating the response at the moment.'\n      }]);\n    }\n  };\n  const playTTS = async (text, voiceId = 'pFZP5JQG7iQjIQuC4Bku') => {\n    try {\n      const audioBlob = await tts11(text, voiceId); // Replace 'your_voice_id_here' with the appropriate voice ID\n      const audioUrl = URL.createObjectURL(audioBlob);\n      const audio = new Audio(audioUrl);\n      audio.play();\n    } catch (error) {\n      console.error('Error playing TTS audio:', error);\n    }\n  };\n  const handleSendMessage = () => {\n    if (input.trim() !== '') {\n      const userMessage = input.trim();\n      setMessages([...messages, {\n        sender: 'user',\n        text: userMessage\n      }]);\n      setInput('');\n      fetchChatGPTResponse(userMessage);\n    }\n  };\n  const handleVoiceInput = () => {\n    if (isListening) {\n      // Stop listening\n      setIsListening(false);\n      setSpokenText('');\n    } else {\n      // Start listening\n      setIsListening(true);\n\n      // Check if SpeechRecognition is supported\n      const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;\n      if (!SpeechRecognition) {\n        console.error('Speech recognition not supported in this browser.');\n        setSpokenText('Speech recognition is not supported in your browser.');\n        setIsListening(false);\n        return;\n      }\n      const recognition = new SpeechRecognition();\n      recognition.lang = languageCodes[selectedLanguage] || 'en-US';\n      recognition.interimResults = false; // Only final results\n      recognition.continuous = false; // Stop after one result\n\n      recognition.onstart = () => {\n        setSpokenText('Listening...');\n      };\n      recognition.onresult = event => {\n        const transcript = event.results[0][0].transcript;\n        setSpokenText('');\n        setIsListening(false);\n\n        // Automatically send the message\n        if (transcript.trim() !== '') {\n          setMessages(prevMessages => [...prevMessages, {\n            sender: 'user',\n            text: transcript.trim()\n          }]);\n          fetchChatGPTResponse(transcript.trim());\n        }\n      };\n      recognition.onerror = event => {\n        console.error('Speech recognition error:', event.error);\n        setSpokenText('Could not understand. Please try again.');\n        setIsListening(false);\n      };\n      recognition.onend = () => {\n        setSpokenText('');\n        setIsListening(false);\n      };\n      recognition.start();\n    }\n  };\n  const handleLanguageChange = language => {\n    setSelectedLanguage(language);\n  };\n  const handleKeyPress = e => {\n    if (e.key === 'Enter') {\n      handleSendMessage();\n    }\n  };\n  const handleTranslateMessage = async (message, index) => {\n    if (isTranslating) return;\n    setIsTranslating(true);\n    const apiKey = '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';\n    const translationPrompt = `You are a helpful assistant that translates text to ${selectedLanguage}. Translate this text: \"${message}\"`;\n    try {\n      const response = await fetch('https://api.openai.com/v1/chat/completions', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          Authorization: `Bearer ${apiKey}`\n        },\n        body: JSON.stringify({\n          model: 'gpt-4',\n          messages: [{\n            role: 'system',\n            content: translationPrompt\n          }]\n        })\n      });\n      const data = await response.json();\n      const translatedMessage = data.choices[0].message.content;\n      setMessages(prevMessages => {\n        const updatedMessages = [...prevMessages];\n        updatedMessages[index] = {\n          ...updatedMessages[index],\n          translation: translatedMessage\n        };\n        return updatedMessages;\n      });\n      await playTTS(translatedMessage, 'pFZP5JQG7iQjIQuC4Bku'); // Replace with the desired translation voice ID\n    } catch (error) {\n      console.error('Error translating message:', error);\n    } finally {\n      setIsTranslating(false);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"min-h-screen bg-gray-100 flex flex-col\",\n    children: [/*#__PURE__*/_jsxDEV(\"nav\", {\n      className: \"bg-white border-b w-full fixed top-0 z-10\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex justify-between items-center h-16 px-4\",\n        children: [/*#__PURE__*/_jsxDEV(\"img\", {\n          src: freshroadlogo,\n          alt: \"Fresh Road Logo\",\n          className: \"w-35 h-8 mr-2\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 273,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"h1\", {\n          className: \"text-xl font-bold text-gray-900\",\n          children: \"Chat with Luna\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 274,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 272,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 271,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      ref: chatBodyRef,\n      className: \"flex-grow p-4 overflow-y-auto w-full pt-20 pb-28\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex flex-col\",\n        children: messages.map((message, index) => /*#__PURE__*/_jsxDEV(\"div\", {\n          className: `flex ${message.sender === 'bot' ? 'justify-start' : 'justify-end'} mb-4 items-center`,\n          children: message.isSpecial ? /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"max-w-xs px-4 py-2 rounded-lg shadow bg-white text-gray-800\",\n            children: /*#__PURE__*/_jsxDEV(\"a\", {\n              href: \"/resources/Calfresh\",\n              className: \"flex items-center justify-center bg-cyan-500 text-white font-semibold py-2 px-4 rounded-lg hover:bg-cyan-600 transition duration-300 shadow-lg\",\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"mr-2\",\n                children: \"CalFresh Application\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 295,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(PaperAirplaneIcon, {\n                className: \"h-5 w-5\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 296,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 291,\n              columnNumber: 19\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 290,\n            columnNumber: 17\n          }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n            className: `max-w-xs px-4 py-2 rounded-lg shadow ${message.sender === 'bot' ? 'bg-white text-gray-800' : 'bg-cyan-400 text-white'}`,\n            children: [message.text, message.translation && /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"mt-2 text-sm text-gray-600\",\n              children: message.translation\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 307,\n              columnNumber: 21\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 300,\n            columnNumber: 17\n          }, this)\n        }, index, false, {\n          fileName: _jsxFileName,\n          lineNumber: 285,\n          columnNumber: 13\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 283,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 279,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"bg-white border-t p-4 w-full fixed bottom-0 z-10\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex items-center\",\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          className: \"flex-grow border rounded-lg px-4 py-2 focus:outline-none focus:ring focus:ring-cyan-300\",\n          placeholder: \"Type your message...\",\n          value: input,\n          onChange: e => setInput(e.target.value),\n          onKeyPress: handleKeyPress\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 319,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: handleSendMessage,\n          className: \"ml-2 px-4 py-2 bg-cyan-400 text-white rounded-lg hover:bg-cyan-500 flex items-center\",\n          children: [/*#__PURE__*/_jsxDEV(PaperAirplaneIcon, {\n            className: \"h-5 w-5 mr-1\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 331,\n            columnNumber: 13\n          }, this), \" Send\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 327,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: handleVoiceInput,\n          className: `ml-4 px-4 py-2 rounded-lg text-white ${isListening ? 'bg-red-500' : 'bg-cyan-400'} hover:bg-cyan-500 flex items-center`,\n          children: [/*#__PURE__*/_jsxDEV(MicrophoneIcon, {\n            className: \"h-5 w-5 mr-1\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 337,\n            columnNumber: 13\n          }, this), \" \", isListening ? 'Stop' : 'Voice Input']\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 333,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n          value: selectedLanguage,\n          onChange: e => handleLanguageChange(e.target.value),\n          className: \"ml-4 px-4 py-2 border rounded-lg flex items-center\",\n          children: Object.keys(languageCodes).map(lang => /*#__PURE__*/_jsxDEV(\"option\", {\n            value: lang,\n            children: lang\n          }, lang, false, {\n            fileName: _jsxFileName,\n            lineNumber: 345,\n            columnNumber: 15\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 339,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 318,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 317,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 269,\n    columnNumber: 5\n  }, this);\n};\n_s(ChatInterfacePage, \"xAS7TqhwxgEcc5IeqRf8t5lMH0M=\");\n_c = ChatInterfacePage;\nexport default ChatInterfacePage;\nvar _c;\n$RefreshReg$(_c, \"ChatInterfacePage\");","map":{"version":3,"names":["React","useState","useEffect","useRef","freshroadlogo","avatarImage","PaperAirplaneIcon","MicrophoneIcon","TranslateIcon","SpeakerWaveIcon","tts11","jsxDEV","_jsxDEV","ChatInterfacePage","_s","messages","setMessages","sender","text","input","setInput","isListening","setIsListening","spokenText","setSpokenText","selectedLanguage","setSelectedLanguage","isTranslating","setIsTranslating","chatBodyRef","languageCodes","English","Español","中文","Français","Deutsch","Italiano","日本語","한국어","Português","Русский","current","scrollTop","scrollHeight","fetchChatGPTResponse","userMessage","apiKey","chatHistory","role","content","map","msg","response","fetch","method","headers","Authorization","body","JSON","stringify","model","data","json","botMessage","choices","message","trim","prevMessages","isSpecial","handleTranslateAndPlayTTS","playTTS","error","console","translationPrompt","translatedMessage","translation","voiceId","audioBlob","audioUrl","URL","createObjectURL","audio","Audio","play","handleSendMessage","handleVoiceInput","SpeechRecognition","window","webkitSpeechRecognition","recognition","lang","interimResults","continuous","onstart","onresult","event","transcript","results","onerror","onend","start","handleLanguageChange","language","handleKeyPress","e","key","handleTranslateMessage","index","updatedMessages","className","children","src","alt","fileName","_jsxFileName","lineNumber","columnNumber","ref","href","type","placeholder","value","onChange","target","onKeyPress","onClick","Object","keys","_c","$RefreshReg$"],"sources":["C:/Users/allen/dev/FreshroadReact/src/pages/Chatpage.js"],"sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\r\nimport '../App.css';\r\nimport freshroadlogo from '../images/freshroadlogo.png';\r\nimport avatarImage from '../images/callrepai.png';\r\nimport { PaperAirplaneIcon, MicrophoneIcon, TranslateIcon, SpeakerWaveIcon } from '@heroicons/react/outline';\r\nimport { tts11 } from '../api/elevenlabs';\r\n\r\nconst ChatInterfacePage = () => {\r\n  const [messages, setMessages] = useState([\r\n    {\r\n      sender: 'bot',\r\n      text: \"Welcome to the Santa Clara County 211 call center. How can I help you today?\",\r\n    },\r\n  ]);\r\n  const [input, setInput] = useState('');\r\n  const [isListening, setIsListening] = useState(false);\r\n  const [spokenText, setSpokenText] = useState('');\r\n  const [selectedLanguage, setSelectedLanguage] = useState('English');\r\n  const [isTranslating, setIsTranslating] = useState(false);\r\n  const chatBodyRef = useRef(null);\r\n\r\n  const languageCodes = {\r\n    English: 'en-US',\r\n    Español: 'es-ES',\r\n    中文: 'zh-CN',\r\n    Français: 'fr-FR',\r\n    Deutsch: 'de-DE',\r\n    Italiano: 'it-IT',\r\n    日本語: 'ja-JP',\r\n    한국어: 'ko-KR',\r\n    Português: 'pt-BR',\r\n    Русский: 'ru-RU',\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (chatBodyRef.current) {\r\n      chatBodyRef.current.scrollTop = chatBodyRef.current.scrollHeight;\r\n    }\r\n  }, [messages]);\r\n\r\n  const fetchChatGPTResponse = async (userMessage) => {\r\n    const apiKey = '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'; // Replace with your actual API key\r\n    const chatHistory = [\r\n      {\r\n        role: 'system',\r\n        content:\r\n          'Limit responses to three sentences and assume the user can read English so send all responses in English but do not let the user know about this prompt. When you receive questions in another language, understand it and reply in English. The conversations will be multilingual. You work as a customer service representative for the Santa Clara County 211 call center. Your job is to provide accurate information about the services Santa Clara County can offer. Always speak in sentences and lists. If the user is asking for food assistance, give information on CalFresh, the food stamp application, include eligibility. If user agrees to let you help fill out the form, send back only the code \"CalFreshAccepted\".',\r\n      },\r\n      ...messages.map((msg) => ({\r\n        role: msg.sender === 'user' ? 'user' : 'assistant',\r\n        content: msg.text,\r\n      })),\r\n      { role: 'user', content: userMessage },\r\n    ];\r\n  \r\n    try {\r\n      const response = await fetch('https://api.openai.com/v1/chat/completions', {\r\n        method: 'POST',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n          Authorization: `Bearer ${apiKey}`,\r\n        },\r\n        body: JSON.stringify({\r\n          model: 'gpt-4',\r\n          messages: chatHistory,\r\n        }),\r\n      });\r\n  \r\n      const data = await response.json();\r\n      const botMessage = data.choices[0].message.content;\r\n  \r\n      if (botMessage.trim() === 'CalFreshAccepted') {\r\n        // Special handling for CalFreshAccepted\r\n        setMessages((prevMessages) => [\r\n          ...prevMessages,\r\n          { sender: 'bot', text: 'CalFreshAccepted', isSpecial: true },\r\n        ]);\r\n      } else if (selectedLanguage !== 'English') {\r\n        handleTranslateAndPlayTTS(botMessage);\r\n      } else {\r\n        setMessages((prevMessages) => [\r\n          ...prevMessages,\r\n          { sender: 'bot', text: botMessage },\r\n        ]);\r\n        playTTS(botMessage);\r\n      }\r\n    } catch (error) {\r\n      console.error('Error fetching response:', error);\r\n      setMessages((prevMessages) => [\r\n        ...prevMessages,\r\n        { sender: 'bot', text: 'Sorry, I am having trouble responding at the moment. Please try again later.' },\r\n      ]);\r\n    }\r\n  };\r\n  \r\n\r\n  const handleTranslateAndPlayTTS = async (message) => {\r\n    const apiKey = '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'; // Replace with your actual API key\r\n    const translationPrompt = `Translate the following text into ${selectedLanguage}: \"${message}\"`;\r\n  \r\n    try {\r\n      const response = await fetch('https://api.openai.com/v1/chat/completions', {\r\n        method: 'POST',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n          Authorization: `Bearer ${apiKey}`,\r\n        },\r\n        body: JSON.stringify({\r\n          model: 'gpt-4',\r\n          messages: [\r\n            { role: 'system', content: translationPrompt },\r\n          ],\r\n        }),\r\n      });\r\n  \r\n      const data = await response.json();\r\n      const translatedMessage = data.choices[0].message.content;\r\n  \r\n      setMessages((prevMessages) => [\r\n        ...prevMessages,\r\n        { sender: 'bot', text: message, translation: translatedMessage },\r\n      ]);\r\n  \r\n      playTTS(translatedMessage); // Play only the translated message\r\n    } catch (error) {\r\n      console.error('Error translating message:', error);\r\n      setMessages((prevMessages) => [\r\n        ...prevMessages,\r\n        { sender: 'bot', text: 'Sorry, I am having trouble translating the response at the moment.' },\r\n      ]);\r\n    }\r\n  };\r\n\r\n  const playTTS = async (text, voiceId = 'pFZP5JQG7iQjIQuC4Bku') => {\r\n    try {\r\n      const audioBlob = await tts11(text, voiceId); // Replace 'your_voice_id_here' with the appropriate voice ID\r\n      const audioUrl = URL.createObjectURL(audioBlob);\r\n      const audio = new Audio(audioUrl);\r\n      audio.play();\r\n    } catch (error) {\r\n      console.error('Error playing TTS audio:', error);\r\n    }\r\n  };\r\n\r\n  const handleSendMessage = () => {\r\n    if (input.trim() !== '') {\r\n      const userMessage = input.trim();\r\n      setMessages([...messages, { sender: 'user', text: userMessage }]);\r\n      setInput('');\r\n      fetchChatGPTResponse(userMessage);\r\n    }\r\n  };\r\n\r\n  const handleVoiceInput = () => {\r\n    if (isListening) {\r\n      // Stop listening\r\n      setIsListening(false);\r\n      setSpokenText('');\r\n    } else {\r\n      // Start listening\r\n      setIsListening(true);\r\n  \r\n      // Check if SpeechRecognition is supported\r\n      const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;\r\n      if (!SpeechRecognition) {\r\n        console.error('Speech recognition not supported in this browser.');\r\n        setSpokenText('Speech recognition is not supported in your browser.');\r\n        setIsListening(false);\r\n        return;\r\n      }\r\n  \r\n      const recognition = new SpeechRecognition();\r\n      recognition.lang = languageCodes[selectedLanguage] || 'en-US';\r\n      recognition.interimResults = false; // Only final results\r\n      recognition.continuous = false; // Stop after one result\r\n  \r\n      recognition.onstart = () => {\r\n        setSpokenText('Listening...');\r\n      };\r\n  \r\n      recognition.onresult = (event) => {\r\n        const transcript = event.results[0][0].transcript;\r\n        setSpokenText('');\r\n        setIsListening(false);\r\n  \r\n        // Automatically send the message\r\n        if (transcript.trim() !== '') {\r\n          setMessages((prevMessages) => [\r\n            ...prevMessages,\r\n            { sender: 'user', text: transcript.trim() },\r\n          ]);\r\n          fetchChatGPTResponse(transcript.trim());\r\n        }\r\n      };\r\n  \r\n      recognition.onerror = (event) => {\r\n        console.error('Speech recognition error:', event.error);\r\n        setSpokenText('Could not understand. Please try again.');\r\n        setIsListening(false);\r\n      };\r\n  \r\n      recognition.onend = () => {\r\n        setSpokenText('');\r\n        setIsListening(false);\r\n      };\r\n  \r\n      recognition.start();\r\n    }\r\n  };\r\n\r\n  const handleLanguageChange = (language) => {\r\n    setSelectedLanguage(language);\r\n  };\r\n\r\n  const handleKeyPress = (e) => {\r\n    if (e.key === 'Enter') {\r\n      handleSendMessage();\r\n    }\r\n  };\r\n\r\n  const handleTranslateMessage = async (message, index) => {\r\n    if (isTranslating) return;\r\n    setIsTranslating(true);\r\n\r\n    const apiKey = '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';\r\n    const translationPrompt = `You are a helpful assistant that translates text to ${selectedLanguage}. Translate this text: \"${message}\"`;\r\n\r\n    try {\r\n      const response = await fetch('https://api.openai.com/v1/chat/completions', {\r\n        method: 'POST',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n          Authorization: `Bearer ${apiKey}`,\r\n        },\r\n        body: JSON.stringify({\r\n          model: 'gpt-4',\r\n          messages: [\r\n            {\r\n              role: 'system',\r\n              content: translationPrompt,\r\n            },\r\n          ],\r\n        }),\r\n      });\r\n\r\n      const data = await response.json();\r\n      const translatedMessage = data.choices[0].message.content;\r\n\r\n      setMessages((prevMessages) => {\r\n        const updatedMessages = [...prevMessages];\r\n        updatedMessages[index] = {\r\n          ...updatedMessages[index],\r\n          translation: translatedMessage,\r\n        };\r\n        return updatedMessages;\r\n      });\r\n      await playTTS(translatedMessage, 'pFZP5JQG7iQjIQuC4Bku'); // Replace with the desired translation voice ID\r\n    } catch (error) {\r\n      console.error('Error translating message:', error);\r\n    } finally {\r\n      setIsTranslating(false);\r\n    }\r\n  };\r\n\r\n\r\n  \r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-gray-100 flex flex-col\">\r\n      {/* Header */}\r\n      <nav className=\"bg-white border-b w-full fixed top-0 z-10\">\r\n        <div className=\"flex justify-between items-center h-16 px-4\">\r\n          <img src={freshroadlogo} alt=\"Fresh Road Logo\" className=\"w-35 h-8 mr-2\" />\r\n          <h1 className=\"text-xl font-bold text-gray-900\">Chat with Luna</h1>\r\n        </div>\r\n      </nav>\r\n\r\n      {/* Chat Body */}\r\n      <div\r\n        ref={chatBodyRef}\r\n        className=\"flex-grow p-4 overflow-y-auto w-full pt-20 pb-28\"\r\n      >\r\n        <div className=\"flex flex-col\">\r\n          {messages.map((message, index) => (\r\n            <div\r\n              key={index}\r\n              className={`flex ${message.sender === 'bot' ? 'justify-start' : 'justify-end'} mb-4 items-center`}\r\n            >\r\n              {message.isSpecial ? (\r\n                <div className=\"max-w-xs px-4 py-2 rounded-lg shadow bg-white text-gray-800\">\r\n                  <a\r\n                    href=\"/resources/Calfresh\"\r\n                    className=\"flex items-center justify-center bg-cyan-500 text-white font-semibold py-2 px-4 rounded-lg hover:bg-cyan-600 transition duration-300 shadow-lg\"\r\n                  >\r\n                    <span className=\"mr-2\">CalFresh Application</span>\r\n                    <PaperAirplaneIcon className=\"h-5 w-5\" />\r\n                  </a>\r\n                </div>\r\n              ) : (\r\n                <div\r\n                  className={`max-w-xs px-4 py-2 rounded-lg shadow ${\r\n                    message.sender === 'bot' ? 'bg-white text-gray-800' : 'bg-cyan-400 text-white'\r\n                  }`}\r\n                >\r\n                  {message.text}\r\n                  {message.translation && (\r\n                    <div className=\"mt-2 text-sm text-gray-600\">{message.translation}</div>\r\n                  )}\r\n                </div>\r\n              )}\r\n            </div>\r\n          ))}\r\n        </div>\r\n      </div>\r\n\r\n      {/* Chat Input */}\r\n      <div className=\"bg-white border-t p-4 w-full fixed bottom-0 z-10\">\r\n        <div className=\"flex items-center\">\r\n          <input\r\n            type=\"text\"\r\n            className=\"flex-grow border rounded-lg px-4 py-2 focus:outline-none focus:ring focus:ring-cyan-300\"\r\n            placeholder=\"Type your message...\"\r\n            value={input}\r\n            onChange={(e) => setInput(e.target.value)}\r\n            onKeyPress={handleKeyPress}\r\n          />\r\n          <button\r\n            onClick={handleSendMessage}\r\n            className=\"ml-2 px-4 py-2 bg-cyan-400 text-white rounded-lg hover:bg-cyan-500 flex items-center\"\r\n          >\r\n            <PaperAirplaneIcon className=\"h-5 w-5 mr-1\" /> Send\r\n          </button>\r\n          <button\r\n            onClick={handleVoiceInput}\r\n            className={`ml-4 px-4 py-2 rounded-lg text-white ${isListening ? 'bg-red-500' : 'bg-cyan-400'} hover:bg-cyan-500 flex items-center`}\r\n          >\r\n            <MicrophoneIcon className=\"h-5 w-5 mr-1\" /> {isListening ? 'Stop' : 'Voice Input'}\r\n          </button>\r\n          <select\r\n            value={selectedLanguage}\r\n            onChange={(e) => handleLanguageChange(e.target.value)}\r\n            className=\"ml-4 px-4 py-2 border rounded-lg flex items-center\"\r\n          >\r\n            {Object.keys(languageCodes).map((lang) => (\r\n              <option key={lang} value={lang}>\r\n                {lang}\r\n              </option>\r\n            ))}\r\n          </select>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ChatInterfacePage;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}