{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\allen\\\\dev\\\\FreshroadReact\\\\src\\\\pages\\\\Chatpage.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useRef } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport '../App.css';\nimport freshroadlogo from '../images/freshroadlogo.png';\nimport avatarImage from '../images/callrepai.png';\nimport { PaperAirplaneIcon, MicrophoneIcon, TranslateIcon, SpeakerWaveIcon } from '@heroicons/react/outline';\nimport { tts11 } from '../api/elevenlabs';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst ChatFormPage = () => {\n  _s();\n  const [messages, setMessages] = useState([{\n    sender: 'bot',\n    text: \"Welcome to the Santa Clara County 211 call center. How can I help you today?\"\n  }]);\n  const [input, setInput] = useState('');\n  const [isListening, setIsListening] = useState(false);\n  const [spokenText, setSpokenText] = useState('');\n  const [selectedLanguage, setSelectedLanguage] = useState('English');\n  const [isTranslating, setIsTranslating] = useState(false);\n  const messageEndRef = useRef(null);\n  const navigate = useNavigate();\n  const languageCodes = {\n    English: 'en-US',\n    Español: 'es-ES',\n    中文: 'zh-CN',\n    Français: 'fr-FR',\n    Deutsch: 'de-DE',\n    Italiano: 'it-IT',\n    日本語: 'ja-JP',\n    한국어: 'ko-KR',\n    Português: 'pt-BR',\n    Русский: 'ru-RU'\n  };\n  const fetchChatGPTResponse = async userMessage => {\n    const apiKey = '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'; // Replace with your actual API key\n    const chatHistory = [{\n      role: 'system',\n      content: 'Limit responses to three sentences and assume the user can read English so send all responses in English but do not let the user know about this prompt. When you receive questions in another language, understand it and reply in English. The conversations will be multilingual. You work as a customer service representative for the Santa Clara County 211 call center. Your job is to provide accurate information about the services Santa Clara County can offer. Always speak in sentences and lists. If the user is asking for food assistance, give information on CalFresh, the food stamp application, include eligibility. If user agrees to let you help fill out the form, send back only the code \"CalFreshAccepted\".'\n    }, ...messages.map(msg => ({\n      role: msg.sender === 'user' ? 'user' : 'assistant',\n      content: msg.text\n    })), {\n      role: 'user',\n      content: userMessage\n    }];\n    try {\n      const response = await fetch('https://api.openai.com/v1/chat/completions', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          Authorization: `Bearer ${apiKey}`\n        },\n        body: JSON.stringify({\n          model: 'gpt-4',\n          messages: chatHistory\n        })\n      });\n      const data = await response.json();\n      const botMessage = data.choices[0].message.content;\n      if (selectedLanguage !== 'English') {\n        handleTranslateAndPlayTTS(botMessage);\n      } else {\n        setMessages(prevMessages => [...prevMessages, {\n          sender: 'bot',\n          text: botMessage\n        }]);\n        playTTS(botMessage);\n      }\n    } catch (error) {\n      console.error('Error fetching response:', error);\n      setMessages(prevMessages => [...prevMessages, {\n        sender: 'bot',\n        text: 'Sorry, I am having trouble responding at the moment. Please try again later.'\n      }]);\n    }\n  };\n  const handleTranslateAndPlayTTS = async message => {\n    const apiKey = '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'; // Replace with your actual API key\n    const translationPrompt = `Translate the following text into ${selectedLanguage}: \"${message}\"`;\n    try {\n      const response = await fetch('https://api.openai.com/v1/chat/completions', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          Authorization: `Bearer ${apiKey}`\n        },\n        body: JSON.stringify({\n          model: 'gpt-4',\n          messages: [{\n            role: 'system',\n            content: translationPrompt\n          }]\n        })\n      });\n      const data = await response.json();\n      const translatedMessage = data.choices[0].message.content;\n      setMessages(prevMessages => [...prevMessages, {\n        sender: 'bot',\n        text: message,\n        translation: translatedMessage\n      }]);\n      playTTS(translatedMessage); // Play only the translated message\n    } catch (error) {\n      console.error('Error translating message:', error);\n      setMessages(prevMessages => [...prevMessages, {\n        sender: 'bot',\n        text: 'Sorry, I am having trouble translating the response at the moment.'\n      }]);\n    }\n  };\n  useEffect(() => {\n    if (messageEndRef.current) {\n      messageEndRef.current.scrollIntoView({\n        behavior: 'smooth'\n      });\n    }\n  }, [messages]); // Run whenever the messages array updates\n\n  const playTTS = async (text, voiceId = 'pFZP5JQG7iQjIQuC4Bku') => {\n    try {\n      const audioBlob = await tts11(text, voiceId); // Replace 'your_voice_id_here' with the appropriate voice ID\n      const audioUrl = URL.createObjectURL(audioBlob);\n      const audio = new Audio(audioUrl);\n      audio.play();\n    } catch (error) {\n      console.error('Error playing TTS audio:', error);\n    }\n  };\n  const handleSendMessage = () => {\n    if (input.trim() !== '') {\n      const userMessage = input.trim();\n      setMessages([...messages, {\n        sender: 'user',\n        text: userMessage\n      }]);\n      setInput('');\n      fetchChatGPTResponse(userMessage);\n    }\n  };\n  const handleVoiceInput = () => {\n    if (isListening) {\n      // Stop listening\n      setIsListening(false);\n      setSpokenText('');\n    } else {\n      // Start listening\n      setIsListening(true);\n\n      // Check if SpeechRecognition is supported\n      const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;\n      if (!SpeechRecognition) {\n        console.error('Speech recognition not supported in this browser.');\n        setSpokenText('Speech recognition is not supported in your browser.');\n        setIsListening(false);\n        return;\n      }\n      const recognition = new SpeechRecognition();\n      recognition.lang = languageCodes[selectedLanguage] || 'en-US';\n      recognition.interimResults = false; // Only final results\n      recognition.continuous = false; // Stop after one result\n\n      recognition.onstart = () => {\n        setSpokenText('Listening...');\n      };\n      recognition.onresult = event => {\n        const transcript = event.results[0][0].transcript;\n        setSpokenText('');\n        setIsListening(false);\n\n        // Automatically send the message\n        if (transcript.trim() !== '') {\n          setMessages(prevMessages => [...prevMessages, {\n            sender: 'user',\n            text: transcript.trim()\n          }]);\n          fetchChatGPTResponse(transcript.trim());\n        }\n      };\n      recognition.onerror = event => {\n        console.error('Speech recognition error:', event.error);\n        setSpokenText('Could not understand. Please try again.');\n        setIsListening(false);\n      };\n      recognition.onend = () => {\n        setSpokenText('');\n        setIsListening(false);\n      };\n      recognition.start();\n    }\n  };\n  const handleLanguageChange = language => {\n    setSelectedLanguage(language);\n  };\n  const handleKeyPress = e => {\n    if (e.key === 'Enter') {\n      handleSendMessage();\n    }\n  };\n  const handleTranslateMessage = async (message, index) => {\n    if (isTranslating) return;\n    setIsTranslating(true);\n    const apiKey = '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';\n    const translationPrompt = `You are a helpful assistant that translates text to ${selectedLanguage}. Translate this text: \"${message}\"`;\n    try {\n      const response = await fetch('https://api.openai.com/v1/chat/completions', {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          Authorization: `Bearer ${apiKey}`\n        },\n        body: JSON.stringify({\n          model: 'gpt-4',\n          messages: [{\n            role: 'system',\n            content: translationPrompt\n          }]\n        })\n      });\n      const data = await response.json();\n      const translatedMessage = data.choices[0].message.content;\n      setMessages(prevMessages => {\n        const updatedMessages = [...prevMessages];\n        updatedMessages[index] = {\n          ...updatedMessages[index],\n          translation: translatedMessage\n        };\n        return updatedMessages;\n      });\n      await playTTS(translatedMessage, 'pFZP5JQG7iQjIQuC4Bku'); // Replace with the desired translation voice ID\n    } catch (error) {\n      console.error('Error translating message:', error);\n    } finally {\n      setIsTranslating(false);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"flex flex-col h-screen\",\n    children: [/*#__PURE__*/_jsxDEV(\"nav\", {\n      className: \"flex justify-between items-center h-16 px-4 bg-white border-b\",\n      style: {\n        position: 'fixed',\n        top: 0,\n        left: 0,\n        right: 0,\n        zIndex: 10\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"img\", {\n        src: freshroadlogo,\n        alt: \"Fresh Road Logo\",\n        className: \"w-35 h-8 mr-2\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 273,\n        columnNumber: 3\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        // eslint-disable-next-line no-undef\n        onClick: () => navigate(-1) // Goes back to the previous page\n        ,\n        className: \"text-xl font-bold text-gray-900 hover:text-cyan-500 flex items-center\",\n        children: [/*#__PURE__*/_jsxDEV(\"svg\", {\n          xmlns: \"http://www.w3.org/2000/svg\",\n          className: \"h-6 w-6 mr-2\",\n          fill: \"none\",\n          viewBox: \"0 0 24 24\",\n          stroke: \"currentColor\",\n          strokeWidth: 2,\n          children: /*#__PURE__*/_jsxDEV(\"path\", {\n            strokeLinecap: \"round\",\n            strokeLinejoin: \"round\",\n            d: \"M15 19l-7-7 7-7\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 287,\n            columnNumber: 7\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 279,\n          columnNumber: 5\n        }, this), \"Back\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 274,\n        columnNumber: 3\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 269,\n      columnNumber: 1\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex-grow flex overflow-hidden mt-16\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"w-1/3 bg-white rounded-lg shadow flex-shrink-0 flex flex-col items-center\",\n        style: {\n          height: 'calc(100vh - 8rem)',\n          overflow: 'hidden'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"w-full h-2/3\",\n          style: {\n            backgroundImage: '../images/callrepai.png',\n            // Replace with the correct image path\n            backgroundSize: 'cover',\n            backgroundPosition: 'center'\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 308,\n          columnNumber: 3\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"w-full h-1/3 p-4 flex flex-col items-center justify-center\",\n          children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n            className: \"text-lg font-bold mb-2 text-center\",\n            children: \"211 Rep\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 319,\n            columnNumber: 5\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"text-center text-sm mb-2\",\n            children: /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 321,\n              columnNumber: 7\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 320,\n            columnNumber: 5\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"text-center text-sm\",\n            children: \"Her name is Kaoru Yoshida, a Japanese teacher who likes idols. She was once part of an idol group.\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 323,\n            columnNumber: 5\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"mt-4 px-4 py-2 bg-cyan-400 text-white rounded-lg hover:bg-cyan-500\",\n            onClick: () => alert('Change Tutor functionality not implemented yet!'),\n            children: \"Change Tutor\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 326,\n            columnNumber: 5\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 318,\n          columnNumber: 3\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 303,\n        columnNumber: 1\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"w-2/3 p-4 bg-gray-100 overflow-y-auto\",\n        style: {\n          height: 'calc(100vh - 8rem)'\n        },\n        children: [messages.map((message, index) => /*#__PURE__*/_jsxDEV(\"div\", {\n          className: `flex mb-4 items-center ${message.sender === 'bot' ? 'justify-start' : 'justify-end'}`,\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: `max-w-xs px-4 py-2 rounded-lg shadow ${message.sender === 'bot' ? 'bg-white text-gray-800' : 'bg-cyan-400 text-white'}`,\n            children: [message.text, message.translation && /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"mt-2 text-sm text-gray-600\",\n              children: message.translation\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 367,\n              columnNumber: 11\n            }, this), message.sender === 'bot' && /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => handleTranslateMessage(message.text, index),\n              className: \"mt-2 text-xs text-blue-500 flex items-center\",\n              children: [/*#__PURE__*/_jsxDEV(TranslateIcon, {\n                className: \"h-5 w-5 mr-1\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 376,\n                columnNumber: 13\n              }, this), \"Translate\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 372,\n              columnNumber: 11\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 358,\n            columnNumber: 7\n          }, this)\n        }, index, false, {\n          fileName: _jsxFileName,\n          lineNumber: 341,\n          columnNumber: 5\n        }, this)), /*#__PURE__*/_jsxDEV(\"div\", {\n          ref: messageEndRef\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 384,\n          columnNumber: 3\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 336,\n        columnNumber: 1\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 299,\n      columnNumber: 5\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex items-center p-4 bg-white border-t\",\n      style: {\n        position: 'sticky',\n        bottom: 0\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        className: \"flex-grow border rounded-lg px-4 py-2 focus:outline-none focus:ring focus:ring-cyan-300\",\n        placeholder: \"Type your message...\",\n        value: input,\n        onChange: e => setInput(e.target.value),\n        onKeyPress: handleKeyPress\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 393,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: handleSendMessage,\n        className: \"ml-2 px-4 py-2 bg-cyan-400 text-white rounded-lg hover:bg-cyan-500 flex items-center\",\n        children: [/*#__PURE__*/_jsxDEV(PaperAirplaneIcon, {\n          className: \"h-5 w-5 mr-1\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 405,\n          columnNumber: 9\n        }, this), \" Send\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 401,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: handleVoiceInput,\n        className: `ml-4 px-4 py-2 rounded-lg text-white ${isListening ? 'bg-red-500' : 'bg-cyan-400'} hover:bg-cyan-500 flex items-center`,\n        children: [/*#__PURE__*/_jsxDEV(MicrophoneIcon, {\n          className: \"h-5 w-5 mr-1\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 413,\n          columnNumber: 9\n        }, this), ' ', isListening ? 'Stop' : 'Voice Input']\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 407,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n        value: selectedLanguage,\n        onChange: e => handleLanguageChange(e.target.value),\n        className: \"ml-4 px-4 py-2 border rounded-lg\",\n        children: Object.keys(languageCodes).map(lang => /*#__PURE__*/_jsxDEV(\"option\", {\n          value: lang,\n          children: lang\n        }, lang, false, {\n          fileName: _jsxFileName,\n          lineNumber: 422,\n          columnNumber: 11\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 416,\n        columnNumber: 7\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 389,\n      columnNumber: 5\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 267,\n    columnNumber: 5\n  }, this);\n};\n_s(ChatFormPage, \"9R9wTf3l9FLsoOOibAgwwVdYkSU=\", false, function () {\n  return [useNavigate];\n});\n_c = ChatFormPage;\nexport default ChatFormPage;\nvar _c;\n$RefreshReg$(_c, \"ChatFormPage\");","map":{"version":3,"names":["React","useState","useEffect","useRef","useNavigate","freshroadlogo","avatarImage","PaperAirplaneIcon","MicrophoneIcon","TranslateIcon","SpeakerWaveIcon","tts11","jsxDEV","_jsxDEV","ChatFormPage","_s","messages","setMessages","sender","text","input","setInput","isListening","setIsListening","spokenText","setSpokenText","selectedLanguage","setSelectedLanguage","isTranslating","setIsTranslating","messageEndRef","navigate","languageCodes","English","Español","中文","Français","Deutsch","Italiano","日本語","한국어","Português","Русский","fetchChatGPTResponse","userMessage","apiKey","chatHistory","role","content","map","msg","response","fetch","method","headers","Authorization","body","JSON","stringify","model","data","json","botMessage","choices","message","handleTranslateAndPlayTTS","prevMessages","playTTS","error","console","translationPrompt","translatedMessage","translation","current","scrollIntoView","behavior","voiceId","audioBlob","audioUrl","URL","createObjectURL","audio","Audio","play","handleSendMessage","trim","handleVoiceInput","SpeechRecognition","window","webkitSpeechRecognition","recognition","lang","interimResults","continuous","onstart","onresult","event","transcript","results","onerror","onend","start","handleLanguageChange","language","handleKeyPress","e","key","handleTranslateMessage","index","updatedMessages","className","children","style","position","top","left","right","zIndex","src","alt","fileName","_jsxFileName","lineNumber","columnNumber","onClick","xmlns","fill","viewBox","stroke","strokeWidth","strokeLinecap","strokeLinejoin","d","height","overflow","backgroundImage","backgroundSize","backgroundPosition","alert","ref","bottom","type","placeholder","value","onChange","target","onKeyPress","Object","keys","_c","$RefreshReg$"],"sources":["C:/Users/allen/dev/FreshroadReact/src/pages/Chatpage.js"],"sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport '../App.css';\r\nimport freshroadlogo from '../images/freshroadlogo.png';\r\nimport avatarImage from '../images/callrepai.png';\r\nimport { PaperAirplaneIcon, MicrophoneIcon, TranslateIcon, SpeakerWaveIcon } from '@heroicons/react/outline';\r\nimport { tts11 } from '../api/elevenlabs';\r\n\r\n\r\n\r\nconst ChatFormPage = () => {\r\n  const [messages, setMessages] = useState([\r\n    {\r\n      sender: 'bot',\r\n      text: \"Welcome to the Santa Clara County 211 call center. How can I help you today?\",\r\n    },\r\n  ]);\r\n  const [input, setInput] = useState('');\r\n  const [isListening, setIsListening] = useState(false);\r\n  const [spokenText, setSpokenText] = useState('');\r\n  const [selectedLanguage, setSelectedLanguage] = useState('English');\r\n  const [isTranslating, setIsTranslating] = useState(false);\r\n  const messageEndRef = useRef(null);\r\n  const navigate = useNavigate();\r\n\r\n\r\n  \r\n\r\n\r\n  const languageCodes = {\r\n    English: 'en-US',\r\n    Español: 'es-ES',\r\n    中文: 'zh-CN',\r\n    Français: 'fr-FR',\r\n    Deutsch: 'de-DE',\r\n    Italiano: 'it-IT',\r\n    日本語: 'ja-JP',\r\n    한국어: 'ko-KR',\r\n    Português: 'pt-BR',\r\n    Русский: 'ru-RU',\r\n  };\r\n\r\n  const fetchChatGPTResponse = async (userMessage) => {\r\n    const apiKey = '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'; // Replace with your actual API key\r\n    const chatHistory = [\r\n      {\r\n        role: 'system',\r\n        content:\r\n          'Limit responses to three sentences and assume the user can read English so send all responses in English but do not let the user know about this prompt. When you receive questions in another language, understand it and reply in English. The conversations will be multilingual. You work as a customer service representative for the Santa Clara County 211 call center. Your job is to provide accurate information about the services Santa Clara County can offer. Always speak in sentences and lists. If the user is asking for food assistance, give information on CalFresh, the food stamp application, include eligibility. If user agrees to let you help fill out the form, send back only the code \"CalFreshAccepted\".',\r\n      },\r\n      ...messages.map((msg) => ({\r\n        role: msg.sender === 'user' ? 'user' : 'assistant',\r\n        content: msg.text,\r\n      })),\r\n      { role: 'user', content: userMessage },\r\n    ];\r\n\r\n    try {\r\n      const response = await fetch('https://api.openai.com/v1/chat/completions', {\r\n        method: 'POST',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n          Authorization: `Bearer ${apiKey}`,\r\n        },\r\n        body: JSON.stringify({\r\n          model: 'gpt-4',\r\n          messages: chatHistory,\r\n        }),\r\n      });\r\n  \r\n      const data = await response.json();\r\n      const botMessage = data.choices[0].message.content;\r\n  \r\n      if (selectedLanguage !== 'English') {\r\n        handleTranslateAndPlayTTS(botMessage);\r\n      } else {\r\n        setMessages((prevMessages) => [\r\n          ...prevMessages,\r\n          { sender: 'bot', text: botMessage },\r\n        ]);\r\n        playTTS(botMessage);\r\n      }\r\n    } catch (error) {\r\n      console.error('Error fetching response:', error);\r\n      setMessages((prevMessages) => [\r\n        ...prevMessages,\r\n        { sender: 'bot', text: 'Sorry, I am having trouble responding at the moment. Please try again later.' },\r\n      ]);\r\n    }\r\n  };\r\n\r\n  const handleTranslateAndPlayTTS = async (message) => {\r\n    const apiKey = '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'; // Replace with your actual API key\r\n    const translationPrompt = `Translate the following text into ${selectedLanguage}: \"${message}\"`;\r\n  \r\n    try {\r\n      const response = await fetch('https://api.openai.com/v1/chat/completions', {\r\n        method: 'POST',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n          Authorization: `Bearer ${apiKey}`,\r\n        },\r\n        body: JSON.stringify({\r\n          model: 'gpt-4',\r\n          messages: [\r\n            { role: 'system', content: translationPrompt },\r\n          ],\r\n        }),\r\n      });\r\n  \r\n      const data = await response.json();\r\n      const translatedMessage = data.choices[0].message.content;\r\n  \r\n      setMessages((prevMessages) => [\r\n        ...prevMessages,\r\n        { sender: 'bot', text: message, translation: translatedMessage },\r\n      ]);\r\n  \r\n      playTTS(translatedMessage); // Play only the translated message\r\n    } catch (error) {\r\n      console.error('Error translating message:', error);\r\n      setMessages((prevMessages) => [\r\n        ...prevMessages,\r\n        { sender: 'bot', text: 'Sorry, I am having trouble translating the response at the moment.' },\r\n      ]);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (messageEndRef.current) {\r\n      messageEndRef.current.scrollIntoView({ behavior: 'smooth' });\r\n    }\r\n  }, [messages]); // Run whenever the messages array updates\r\n\r\n  const playTTS = async (text, voiceId = 'pFZP5JQG7iQjIQuC4Bku') => {\r\n    try {\r\n      const audioBlob = await tts11(text, voiceId); // Replace 'your_voice_id_here' with the appropriate voice ID\r\n      const audioUrl = URL.createObjectURL(audioBlob);\r\n      const audio = new Audio(audioUrl);\r\n      audio.play();\r\n    } catch (error) {\r\n      console.error('Error playing TTS audio:', error);\r\n    }\r\n  };\r\n\r\n  const handleSendMessage = () => {\r\n    if (input.trim() !== '') {\r\n      const userMessage = input.trim();\r\n      setMessages([...messages, { sender: 'user', text: userMessage }]);\r\n      setInput('');\r\n      fetchChatGPTResponse(userMessage);\r\n    }\r\n  };\r\n\r\n  const handleVoiceInput = () => {\r\n    if (isListening) {\r\n      // Stop listening\r\n      setIsListening(false);\r\n      setSpokenText('');\r\n    } else {\r\n      // Start listening\r\n      setIsListening(true);\r\n  \r\n      // Check if SpeechRecognition is supported\r\n      const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;\r\n      if (!SpeechRecognition) {\r\n        console.error('Speech recognition not supported in this browser.');\r\n        setSpokenText('Speech recognition is not supported in your browser.');\r\n        setIsListening(false);\r\n        return;\r\n      }\r\n  \r\n      const recognition = new SpeechRecognition();\r\n      recognition.lang = languageCodes[selectedLanguage] || 'en-US';\r\n      recognition.interimResults = false; // Only final results\r\n      recognition.continuous = false; // Stop after one result\r\n  \r\n      recognition.onstart = () => {\r\n        setSpokenText('Listening...');\r\n      };\r\n  \r\n      recognition.onresult = (event) => {\r\n        const transcript = event.results[0][0].transcript;\r\n        setSpokenText('');\r\n        setIsListening(false);\r\n  \r\n        // Automatically send the message\r\n        if (transcript.trim() !== '') {\r\n          setMessages((prevMessages) => [\r\n            ...prevMessages,\r\n            { sender: 'user', text: transcript.trim() },\r\n          ]);\r\n          fetchChatGPTResponse(transcript.trim());\r\n        }\r\n      };\r\n  \r\n      recognition.onerror = (event) => {\r\n        console.error('Speech recognition error:', event.error);\r\n        setSpokenText('Could not understand. Please try again.');\r\n        setIsListening(false);\r\n      };\r\n  \r\n      recognition.onend = () => {\r\n        setSpokenText('');\r\n        setIsListening(false);\r\n      };\r\n  \r\n      recognition.start();\r\n    }\r\n  };\r\n\r\n  const handleLanguageChange = (language) => {\r\n    setSelectedLanguage(language);\r\n  };\r\n\r\n  const handleKeyPress = (e) => {\r\n    if (e.key === 'Enter') {\r\n      handleSendMessage();\r\n    }\r\n  };\r\n\r\n  const handleTranslateMessage = async (message, index) => {\r\n    if (isTranslating) return;\r\n    setIsTranslating(true);\r\n\r\n    const apiKey = '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';\r\n    const translationPrompt = `You are a helpful assistant that translates text to ${selectedLanguage}. Translate this text: \"${message}\"`;\r\n\r\n    try {\r\n      const response = await fetch('https://api.openai.com/v1/chat/completions', {\r\n        method: 'POST',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n          Authorization: `Bearer ${apiKey}`,\r\n        },\r\n        body: JSON.stringify({\r\n          model: 'gpt-4',\r\n          messages: [\r\n            {\r\n              role: 'system',\r\n              content: translationPrompt,\r\n            },\r\n          ],\r\n        }),\r\n      });\r\n\r\n      const data = await response.json();\r\n      const translatedMessage = data.choices[0].message.content;\r\n\r\n      setMessages((prevMessages) => {\r\n        const updatedMessages = [...prevMessages];\r\n        updatedMessages[index] = {\r\n          ...updatedMessages[index],\r\n          translation: translatedMessage,\r\n        };\r\n        return updatedMessages;\r\n      });\r\n      await playTTS(translatedMessage, 'pFZP5JQG7iQjIQuC4Bku'); // Replace with the desired translation voice ID\r\n    } catch (error) {\r\n      console.error('Error translating message:', error);\r\n    } finally {\r\n      setIsTranslating(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"flex flex-col h-screen\">\r\n    {/* Header */}\r\n<nav\r\n  className=\"flex justify-between items-center h-16 px-4 bg-white border-b\"\r\n  style={{ position: 'fixed', top: 0, left: 0, right: 0, zIndex: 10 }}\r\n>\r\n  <img src={freshroadlogo} alt=\"Fresh Road Logo\" className=\"w-35 h-8 mr-2\" />\r\n  <button\r\n    // eslint-disable-next-line no-undef\r\n    onClick={() => navigate(-1)} // Goes back to the previous page\r\n    className=\"text-xl font-bold text-gray-900 hover:text-cyan-500 flex items-center\"\r\n  >\r\n    <svg\r\n      xmlns=\"http://www.w3.org/2000/svg\"\r\n      className=\"h-6 w-6 mr-2\"\r\n      fill=\"none\"\r\n      viewBox=\"0 0 24 24\"\r\n      stroke=\"currentColor\"\r\n      strokeWidth={2}\r\n    >\r\n      <path\r\n        strokeLinecap=\"round\"\r\n        strokeLinejoin=\"round\"\r\n        d=\"M15 19l-7-7 7-7\"\r\n      />\r\n    </svg>\r\n    Back\r\n  </button>\r\n</nav>\r\n\r\n  \r\n    {/* Main Content */}\r\n    <div\r\n      className=\"flex-grow flex overflow-hidden mt-16\"\r\n    >\r\n      {/* Feature Section */}\r\n<div\r\n  className=\"w-1/3 bg-white rounded-lg shadow flex-shrink-0 flex flex-col items-center\"\r\n  style={{ height: 'calc(100vh - 8rem)', overflow: 'hidden' }}\r\n>\r\n  {/* Avatar Image */}\r\n  <div\r\n    className=\"w-full h-2/3\"\r\n    style={{\r\n      backgroundImage: '../images/callrepai.png', // Replace with the correct image path\r\n      backgroundSize: 'cover',\r\n      backgroundPosition: 'center',\r\n    }}\r\n  ></div>\r\n\r\n  {/* Description Section */}\r\n  <div className=\"w-full h-1/3 p-4 flex flex-col items-center justify-center\">\r\n    <h2 className=\"text-lg font-bold mb-2 text-center\">211 Rep</h2>\r\n    <p className=\"text-center text-sm mb-2\">\r\n      <br />\r\n    </p>\r\n    <p className=\"text-center text-sm\">\r\n      Her name is Kaoru Yoshida, a Japanese teacher who likes idols. She was once part of an idol group.\r\n    </p>\r\n    <button\r\n      className=\"mt-4 px-4 py-2 bg-cyan-400 text-white rounded-lg hover:bg-cyan-500\"\r\n      onClick={() => alert('Change Tutor functionality not implemented yet!')}\r\n    >\r\n      Change Tutor\r\n    </button>\r\n  </div>\r\n</div>\r\n  \r\n     {/* Chat Body */}\r\n<div\r\n  className=\"w-2/3 p-4 bg-gray-100 overflow-y-auto\"\r\n  style={{ height: 'calc(100vh - 8rem)' }}\r\n>\r\n  {messages.map((message, index) => (\r\n    <div\r\n      key={index}\r\n      className={`flex mb-4 items-center ${\r\n        message.sender === 'bot' ? 'justify-start' : 'justify-end'\r\n      }`}\r\n    >\r\n      {/* Avatar Section */}\r\n      {/* {message.sender === 'bot' && (\r\n        <div className=\"hidden sm:block mr-4\">\r\n          <img\r\n            src={avatarImage}\r\n            alt=\"Chat Bot Avatar\"\r\n            className=\"w-16 h-16 rounded-full border border-gray-300\"\r\n          />\r\n        </div>\r\n      )} */}\r\n      {/* Message Section */}\r\n      <div\r\n        className={`max-w-xs px-4 py-2 rounded-lg shadow ${\r\n          message.sender === 'bot'\r\n            ? 'bg-white text-gray-800'\r\n            : 'bg-cyan-400 text-white'\r\n        }`}\r\n      >\r\n        {message.text}\r\n        {message.translation && (\r\n          <div className=\"mt-2 text-sm text-gray-600\">\r\n            {message.translation}\r\n          </div>\r\n        )}\r\n        {message.sender === 'bot' && (\r\n          <button\r\n            onClick={() => handleTranslateMessage(message.text, index)}\r\n            className=\"mt-2 text-xs text-blue-500 flex items-center\"\r\n          >\r\n            <TranslateIcon className=\"h-5 w-5 mr-1\" />\r\n            Translate\r\n          </button>\r\n        )}\r\n      </div>\r\n    </div>\r\n  ))}\r\n  {/* Auto-Scroll Target */}\r\n  <div ref={messageEndRef} />\r\n</div>\r\n    </div>\r\n  \r\n    {/* Chat Input */}\r\n    <div\r\n      className=\"flex items-center p-4 bg-white border-t\"\r\n      style={{ position: 'sticky', bottom: 0 }}\r\n    >\r\n      <input\r\n        type=\"text\"\r\n        className=\"flex-grow border rounded-lg px-4 py-2 focus:outline-none focus:ring focus:ring-cyan-300\"\r\n        placeholder=\"Type your message...\"\r\n        value={input}\r\n        onChange={(e) => setInput(e.target.value)}\r\n        onKeyPress={handleKeyPress}\r\n      />\r\n      <button\r\n        onClick={handleSendMessage}\r\n        className=\"ml-2 px-4 py-2 bg-cyan-400 text-white rounded-lg hover:bg-cyan-500 flex items-center\"\r\n      >\r\n        <PaperAirplaneIcon className=\"h-5 w-5 mr-1\" /> Send\r\n      </button>\r\n      <button\r\n        onClick={handleVoiceInput}\r\n        className={`ml-4 px-4 py-2 rounded-lg text-white ${\r\n          isListening ? 'bg-red-500' : 'bg-cyan-400'\r\n        } hover:bg-cyan-500 flex items-center`}\r\n      >\r\n        <MicrophoneIcon className=\"h-5 w-5 mr-1\" />{' '}\r\n        {isListening ? 'Stop' : 'Voice Input'}\r\n      </button>\r\n      <select\r\n        value={selectedLanguage}\r\n        onChange={(e) => handleLanguageChange(e.target.value)}\r\n        className=\"ml-4 px-4 py-2 border rounded-lg\"\r\n      >\r\n        {Object.keys(languageCodes).map((lang) => (\r\n          <option key={lang} value={lang}>\r\n            {lang}\r\n          </option>\r\n        ))}\r\n      </select>\r\n    </div>\r\n  </div>\r\n  \r\n  );\r\n};\r\n\r\nexport default ChatFormPage;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}